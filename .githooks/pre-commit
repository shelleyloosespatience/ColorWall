#!/bin/bash

# Check for GPLv3 header in Rust files
check_license() {
    local file="$1"
    if ! grep -q "Copyright (C) $(date +%Y)  laxenta" "$file" || ! grep -q "This program is free software" "$file"; then
        echo "Error: Missing or incomplete license header in $file"
        exit 1
    fi
}

# Check all staged Rust files
for file in $(git diff --cached --name-only | grep '\.rs$'); do
    check_license "$file"
done